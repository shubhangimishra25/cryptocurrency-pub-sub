{"ast":null,"code":"var _jsxFileName = \"/Users/shubhangimishra/Desktop/docker/33_50373871_p12/frontend/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport TopicInput from './components/songs/TopicInput';\nimport PublishTopic from './components/songs/PublishTopic';\nimport LoginScreen from './components/LoginScreen/LoginScreen';\nimport ErrorAlert from './components/UI/ErrorAlert';\nimport SuccessAlert from './components/UI/Success';\nimport SubscribedTopic from './components/songs/SubscribedTopic';\nimport UnsubscribeTopic from './components/songs/UnsubscribeTopic';\n\nfunction App() {\n  const [user, setEnteredUser] = useState({\n    email: \"\",\n    pwd: \"\"\n  });\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [topicsSubscribed, setTopicsSubscribed] = useState([]);\n  var topicsSubscribe = [];\n\n  async function tryy(user) {\n    try {\n      const response = await fetch('http://localhost/particularUserTopic/' + user, {\n        method: 'GET'\n      });\n      console.log(response);\n      setTopicsSubscribed(response);\n    } catch (err) {\n      setError(err.message || 'Subscribing a topic failed - the server responsed with an error.');\n    }\n  }\n\n  async function addTopicHandler(userid, topicText) {\n    try {\n      const response = await fetch('http://localhost/topics', {\n        method: 'POST',\n        body: JSON.stringify({\n          userid: userid,\n          topic: topicText\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const resData = await response.json();\n\n      if (!response.ok) {\n        throw new Error(resData.message || 'Subscribing the topic failed.');\n      } else {\n        setSuccess('Successfully subscribed to Topic');\n        console.log('successfluyy subscribe');\n        subscribeData(userid);\n      }\n\n      setTimeout(() => {\n        setError(null);\n      }, 100);\n    } catch (err) {\n      setError(err.message || 'Adding a topic failed - the server responsed with an error.');\n    }\n  }\n\n  async function deleteTopicHandler(userid, topicText) {\n    try {\n      const response = await fetch('http://localhost/deleteTopic', {\n        method: 'POST',\n        body: JSON.stringify({\n          userid: userid,\n          topic: topicText\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const resData = await response.json();\n\n      if (!response.ok) {\n        throw new Error(resData.message || 'Deleting the topic failed.');\n      } else {\n        setSuccess('Successfully deleted to Topic');\n        console.log('successfluyy deleted');\n        subscribeData(userid);\n      }\n\n      setTimeout(() => {\n        setError(null);\n      }, 100);\n    } catch (err) {\n      setError(err.message || 'Adding a topic failed - the server responsed with an error.');\n    }\n  }\n\n  async function Login(details) {\n    try {\n      console.log(details);\n      const response = await fetch('http://localhost/login', {\n        method: 'POST',\n        body: JSON.stringify({\n          username: details.username,\n          password: details.password\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const resData = await response.json();\n\n      if (!response.ok) {\n        throw new Error(resData.message || 'Invalid Details.');\n      } else {\n        setEnteredUser({\n          email: details.username,\n          pwd: details.password\n        });\n\n        try {\n          const response = await fetch('http://localhost/filtertopic/' + details.username, {\n            method: 'GET'\n          });\n          console.log(response);\n          response.json().then(function (result) {\n            topicsSubscribe.splice(0, topicsSubscribe.length);\n            result.forEach(element => {\n              console.log(element);\n              topicsSubscribe.push(element);\n              console.log('topicsssss' + topicsSubscribed);\n            }); // \"Some details token\"\n\n            setTopicsSubscribed(topicsSubscribe);\n          });\n        } catch (err) {\n          setError(err.message || 'Subscribing a topic failed - the server responsed with an error.');\n        }\n      }\n    } catch (err) {\n      setError(err.message || 'Subscribing a topic failed - the server responsed with an error.');\n    }\n  }\n\n  async function subscribeData(user) {\n    try {\n      const response = await fetch('http://localhost/filtertopic/' + user, {\n        method: 'GET'\n      });\n      console.log(response);\n      response.json().then(function (result) {\n        topicsSubscribe.splice(0, topicsSubscribe.length);\n        result.forEach(element => {\n          console.log(element);\n          topicsSubscribe.push(element);\n          console.log('topicsssss' + topicsSubscribed);\n        }); // \"Some User token\"\n\n        setTopicsSubscribed(topicsSubscribe);\n      });\n    } catch (err) {\n      setError(err.message || 'Subscribing a topic failed - the server responsed with an error.');\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 5\n    }\n  }, error && /*#__PURE__*/React.createElement(ErrorAlert, {\n    errorText: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }\n  }), success && /*#__PURE__*/React.createElement(SuccessAlert, {\n    successText: success,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 19\n    }\n  }), user.email === '' ? /*#__PURE__*/React.createElement(LoginScreen, {\n    Login: Login,\n    e: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 10\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TopicInput, {\n    onAddTopic: addTopicHandler,\n    user: user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(UnsubscribeTopic, {\n    onDeleteTopic: deleteTopicHandler,\n    user: user,\n    topics: topicsSubscribed.map(home => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 115\n      }\n    }, home.name))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 10\n    }\n  }), /*#__PURE__*/React.createElement(PublishTopic, {\n    onPublishTopic: subscribeData,\n    user: user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 1\n    }\n  }), /*#__PURE__*/React.createElement(SubscribedTopic, {\n    user: topicsSubscribed.map(home => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 50\n      }\n    }, home.name), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 15\n      }\n    }, \"Symbol\", home.symbol), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 15\n      }\n    }, \"PriceUSD\", home.priceUsd), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 15\n      }\n    }, \"PriceBTC\", home.priceBtc), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 15\n      }\n    }, \"percentChange24hUsd\", home.percentChange24hUsd), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 15\n      }\n    }, \"LastUpdated\", home.lastUpdated))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 8\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/shubhangimishra/Desktop/docker/33_50373871_p12/frontend/src/App.js"],"names":["React","useState","useEffect","TopicInput","PublishTopic","LoginScreen","ErrorAlert","SuccessAlert","SubscribedTopic","UnsubscribeTopic","App","user","setEnteredUser","email","pwd","error","setError","success","setSuccess","topicsSubscribed","setTopicsSubscribed","topicsSubscribe","tryy","response","fetch","method","console","log","err","message","addTopicHandler","userid","topicText","body","JSON","stringify","topic","headers","resData","json","ok","Error","subscribeData","setTimeout","deleteTopicHandler","Login","details","username","password","then","result","splice","length","forEach","element","push","map","home","name","symbol","priceUsd","priceBtc","percentChange24hUsd","lastUpdated"],"mappings":"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","sourcesContent":["\nimport React, { useState ,useEffect} from 'react';\nimport TopicInput from './components/songs/TopicInput';\nimport PublishTopic from './components/songs/PublishTopic';\nimport LoginScreen from './components/LoginScreen/LoginScreen'\nimport ErrorAlert from './components/UI/ErrorAlert';\nimport SuccessAlert from './components/UI/Success';\nimport SubscribedTopic from './components/songs/SubscribedTopic'\nimport UnsubscribeTopic from './components/songs/UnsubscribeTopic';\n\nfunction App() {\n\n\n  const [user, setEnteredUser] = useState({ email: \"\", pwd: \"\" });\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [topicsSubscribed, setTopicsSubscribed] = useState([]);\n\n  var topicsSubscribe = []\n\n  async function tryy(user){\n    try {\n\n      const response = await\n        fetch('http://localhost/particularUserTopic/' + user,\n          {\n            method: 'GET',\n          });\n      console.log(response)\nsetTopicsSubscribed(response)\n    } catch (err) {\n      setError(\n        err.message ||\n        'Subscribing a topic failed - the server responsed with an error.'\n      )}\n  }\n  async function addTopicHandler(userid, topicText) {\n\n\n    try {\n      const response = await fetch('http://localhost/topics', {\n        method: 'POST',\n        body: JSON.stringify({\n          userid: userid,\n          topic: topicText,\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      const resData = await response.json();\n\n      if (!response.ok) {\n        throw new Error(resData.message || 'Subscribing the topic failed.');\n      }\n      else {\n        setSuccess('Successfully subscribed to Topic')\n        console.log('successfluyy subscribe')\n\n        subscribeData(userid)\n      }\n      setTimeout(() => {\n        setError(null)\n      }, 100);\n\n\n    } catch (err) {\n      setError(\n        err.message ||\n        'Adding a topic failed - the server responsed with an error.'\n      );\n    }\n\n  }\n  async function deleteTopicHandler(userid, topicText) {\n\n\n    try {\n      const response = await fetch('http://localhost/deleteTopic', {\n        method: 'POST',\n        body: JSON.stringify({\n          userid: userid,\n          topic: topicText,\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      const resData = await response.json();\n\n      if (!response.ok) {\n        throw new Error(resData.message || 'Deleting the topic failed.');\n      }\n      else {\n        setSuccess('Successfully deleted to Topic')\n        console.log('successfluyy deleted')\nsubscribeData(userid)\n  \n      }\n      setTimeout(() => {\n        setError(null)\n      }, 100);\n\n\n    } catch (err) {\n      setError(\n        err.message ||\n        'Adding a topic failed - the server responsed with an error.'\n      );\n    }\n\n  }\n  async function Login(details) {\n\n    try {\n      console.log(details)\n      const response = await fetch('http://localhost/login',\n        {\n          method: 'POST',\n          body: JSON.stringify({\n            username: details.username,\n            password: details.password,\n          }),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n      const resData = await response.json();\n      if (!response.ok) {\n        throw new Error(resData.message || 'Invalid Details.');\n      }\n      else {\n        setEnteredUser({\n          email: details.username,\n          pwd: details.password\n        })\n        try {\n\n          const response = await\n            fetch('http://localhost/filtertopic/' + details.username,\n              {\n                method: 'GET',\n              });\n          console.log(response)\n\n          response.json().then(function (result) {\n\n            topicsSubscribe.splice(0, topicsSubscribe.length)\n            result.forEach(element => {\n              console.log(element)\n\n              topicsSubscribe.push(element)\n\n\n              console.log('topicsssss' + topicsSubscribed)\n            })// \"Some details token\"\n            setTopicsSubscribed(topicsSubscribe)\n          })\n\n\n\n\n\n\n        } catch (err) {\n          setError(\n            err.message ||\n            'Subscribing a topic failed - the server responsed with an error.'\n          );\n        }\n      }\n\n    }\n    catch (err) {\n      setError(\n        err.message ||\n        'Subscribing a topic failed - the server responsed with an error.'\n      );\n    }\n\n  }\n  async function subscribeData(user) {\n    try {\n\n      const response = await\n        fetch('http://localhost/filtertopic/' + user,\n          {\n            method: 'GET',\n          });\n      console.log(response)\n\n      response.json().then(function (result) {\n\n        topicsSubscribe.splice(0, topicsSubscribe.length)\n        result.forEach(element => {\n          console.log(element)\n\n          topicsSubscribe.push(element)\n\n\n          console.log('topicsssss' + topicsSubscribed)\n        })// \"Some User token\"\n        setTopicsSubscribed(topicsSubscribe)\n      })\n\n\n\n\n\n\n    } catch (err) {\n      setError(\n        err.message ||\n        'Subscribing a topic failed - the server responsed with an error.'\n      );\n    }\n  }\n\n\n  return (\n\n    <main className=\"App\">\n      {error && <ErrorAlert errorText={error} />}\n      {success && <SuccessAlert successText={success} />}\n      {(user.email === '') ?\n        (<LoginScreen Login={Login} e={error} />)\n        :\n        (\n          <><TopicInput onAddTopic={addTopicHandler} user={user}\n           />\n         <UnsubscribeTopic onDeleteTopic={deleteTopicHandler} user={user} topics= {topicsSubscribed.map(home => <><div>{home.name}</div>\n             </>)}/>\n\n\n<PublishTopic onPublishTopic={subscribeData} user={user} />\n       <SubscribedTopic \n            user={topicsSubscribed.map(home => <><div>{home.name}</div>\n              <div>Symbol\n                {home.symbol}</div>\n              <div>PriceUSD{home.priceUsd}</div>\n              <div>PriceBTC{home.priceBtc}</div>\n              <div>percentChange24hUsd{home.percentChange24hUsd}</div>\n              <div>LastUpdated{home.lastUpdated}</div></>)} />\n        </>\n        \n        )\n      }\n\n\n    </main>\n\n  );\n}\n\n\nexport default App;\n\n\n\n"]},"metadata":{},"sourceType":"module"}